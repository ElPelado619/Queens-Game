(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const ne="0.4.1";function oe(){const e=new Date().toLocaleString(),t=["color: #61dafb","background-color: #222","padding: 4px 8px","border-radius: 4px","font-family: monospace"].join(";");console.log(`%c♕ Queens Game v${ne} | ${e} ♕`,t)}typeof window<"u"&&(oe(),performance?.mark&&performance.mark("game_init_start"));const le="modulepreload",re=function(e){return"https://elpelado619.github.io/Queens-Game/"+e},V={},E=function(t,o,l){let n=Promise.resolve();if(o&&o.length>0){let R=function(g){return Promise.all(g.map(S=>Promise.resolve(S).then($=>({status:"fulfilled",value:$}),$=>({status:"rejected",reason:$}))))};var c=R;document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),d=i?.nonce||i?.getAttribute("nonce");n=R(o.map(g=>{if(g=re(g),g in V)return;V[g]=!0;const S=g.endsWith(".css"),$=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${$}`))return;const y=document.createElement("link");if(y.rel=S?"stylesheet":le,S||(y.as="script"),y.crossOrigin="",y.href=g,d&&y.setAttribute("nonce",d),document.head.appendChild(y),S)return new Promise((ee,te)=>{y.addEventListener("load",ee),y.addEventListener("error",()=>te(new Error(`Unable to preload CSS for ${g}`)))})}))}function r(i){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=i,window.dispatchEvent(d),!d.defaultPrevented)throw i}return n.then(i=>{for(const d of i||[])d.status==="rejected"&&r(d.reason);return t().catch(r)})},se=Object.assign({"./boards6.js":()=>E(()=>import("./boards6-0mJLLX9k.js"),[]),"./boards7.js":()=>E(()=>import("./boards7-BdnslbAX.js"),[]),"./boards8.js":()=>E(()=>import("./boards8-BNNMYUGF.js"),[]),"./chaosBoards10.js":()=>E(()=>import("./chaosBoards10-DuAJgUPw.js"),[]),"./chaosBoards6.js":()=>E(()=>import("./chaosBoards6-HEwkA7iM.js"),[]),"./chaosBoards7.js":()=>E(()=>import("./chaosBoards7-BlOR_rZY.js"),[]),"./chaosBoards8.js":()=>E(()=>import("./chaosBoards8-QrK0K2FD.js"),[]),"./chaosBoards9.js":()=>E(()=>import("./chaosBoards9-D_NqF0HB.js"),[])});async function ie(e,t){let o=`./boards${e}.js`;t==="chaos"&&(o=`./chaosBoards${e}.js`);const l=se[o];if(!l)return console.error(`No board file found for path: ${o}`),null;const r=(await l())[`boards${e}`];if(!r)return console.error(`No boards object named boards${e} in ${o}`),null;const c=Object.values(r);if(c.length===0)return console.error(`No boards found in boards${e}`),null;const i=Math.floor(Math.random()*c.length);return c[i]}let _=0,k=null;const U=document.getElementById("timer");function ce(e){clearInterval(k);const t=localStorage.getItem("gameCompleted")==="true",o=JSON.parse(localStorage.getItem("miliseconds"));o!==null&&typeof o=="number"&&(_=o),z(),!t&&(e&&(_=0,localStorage.setItem("miliseconds",JSON.stringify(_)),z()),k=setInterval(ae,10))}function ae(){_+=10,localStorage.setItem("miliseconds",JSON.stringify(_));const e=Math.floor(_/1e3),t=Math.floor(e/3600),o=Math.floor(e%3600/60),l=e%60,n=Math.floor(_%1e3/10),r=`${String(t).padStart(2,"0")}:${String(o).padStart(2,"0")}:${String(l).padStart(2,"0")}.${String(n).padStart(2,"0")}`;U.textContent=r}function z(){const e=Math.floor(_/1e3),t=Math.floor(e/3600),o=Math.floor(e%3600/60),l=e%60,n=Math.floor(_%1e3/10),r=`${String(t).padStart(2,"0")}:${String(o).padStart(2,"0")}:${String(l).padStart(2,"0")}.${String(n).padStart(2,"0")}`;U.textContent=r}function F(){clearInterval(k),k=null}function de(){return _}const h={},H={place:.4,remove:.38,win:0},Q={place:1.2,remove:.45,win:1},G={place:1,remove:1.85,win:1},O={place:.25,remove:.25,win:.3};let q=!1;const j="https://elpelado619.github.io/Queens-Game/audio/";function ue(){h.place=new Audio(j+"place.mp3"),h.remove=new Audio(j+"place.mp3"),h.win=new Audio(j+"win.mp3"),h.place.volume=O.place,h.remove.volume=O.remove,h.win.volume=O.win}function D(e){if(!q){if(!h[e]){console.warn(`Sound "${e}" not loaded`);return}try{const t=new Audio(h[e].src);t.currentTime=H[e],t.playbackRate=Q[e]*G[e],t.volume=O[e],t.play().catch(o=>{console.warn("Audio play failed:",o);try{const l=new Audio(`/audio/${e==="remove"?"place":e}.mp3`);l.currentTime=H[e],l.playbackRate=Q[e]*G[e],l.volume=O[e],l.play()}catch(l){console.warn("Fallback failed:",l)}})}catch(t){console.warn("Sound playback error:",t)}}}function me(){const e=()=>{const t=new Audio;t.volume=0,t.play().then(()=>t.remove()),document.removeEventListener("click",e),document.removeEventListener("touchstart",e)};document.addEventListener("click",e,{once:!0}),document.addEventListener("touchstart",e,{once:!0})}ue();me();document.getElementById("volume").addEventListener("click",()=>{const e=document.getElementById("volume");q?(e.classList.remove("volume_off"),e.classList.add("volume_on"),q=!1):(e.classList.remove("volume_on"),e.classList.add("volume_off"),q=!0)});let s=[],I=null,a=null,m=!1,T=!1,p=null,b=new Set,M=null,L=!0,P=!1,A=null;window.addEventListener("blur",()=>{T=!1,p=null,b.clear()});document.addEventListener("mousedown",e=>{if(m||e.button!==0&&e.button!==2)return;T=!0,p=e.button,b.clear(),L=!0;const t=e.target.closest("td");if(t&&t.id){const o=t.id.split("_");if(o.length>=3){const l=Number(o[1]),n=Number(o[2]);p===2&&(P=!0,A=s[l]&&s[l][n]===2?"erase":"draw"),w(l,n,p===0?1:2)}}else p===2&&(P=!1)});document.addEventListener("contextmenu",e=>{P&&e.preventDefault(),P=!1});document.addEventListener("mouseup",e=>{e.button===p&&(T=!1,p=null,A=null,M=setTimeout(()=>b.clear(),50))});document.getElementById("board").addEventListener("contextmenu",e=>e.preventDefault());document.getElementById("board_table").addEventListener("contextmenu",e=>e.preventDefault());function W(){T=!1,p=null,b.clear(),L=!0,M&&(clearTimeout(M),M=null)}async function K(e,t){if(!e)return;document.getElementById("timer").style.color="var(--color_text)",document.getElementById("timer").style.textShadow="0 0 0px #00000000",I=e,a=I.length;let o=!0;const l=localStorage.getItem("queens_matrix");if(m=localStorage.getItem("gameCompleted")==="true",l&&!t)try{const r=JSON.parse(l);if(Array.isArray(r)&&r.length===a)s=r,o=!1;else throw new Error("Invalid size")}catch{x("all"),localStorage.setItem("queens_matrix",JSON.stringify(s))}else x("all"),localStorage.setItem("queens_matrix",JSON.stringify(s));N(),fe(),m?F():ce(o&&!m),C()}function N(){J=[];for(let e=0;e<a;e++)for(let t=0;t<a;t++)X(e,t)}function X(e,t){const o=document.getElementById(`cell_${e}_${t}`);if(!o)return;const l=s[e][t];if(o.innerHTML="",l===1){const n=document.createElement("div");n.className="board_icons icon_queen",n.dataset.row=e,n.dataset.col=t,o.appendChild(n)}else if(l===2){const n=document.createElement("div");n.className="board_icons icon_cross",o.appendChild(n)}else if(l===3){const n=document.createElement("div");n.className="board_icons icon_flag",o.appendChild(n)}}function w(e,t,o){if(m||!ge(e,t))return;const l=`${e}_${t}`;if(!b.has(l)){if(b.add(l),s[e][t],o===1){const n=s[e][t]===1;s[e][t]=n?0:1,L&&(s[e][t]===1?D("place"):n&&D("remove"))}else o===2&&(s[e][t]===0?s[e][t]=2:s[e][t]===2?s[e][t]=3:s[e][t]=0);L=!1,X(e,t),localStorage.setItem("queens_matrix",JSON.stringify(s)),C()}}function fe(){for(let e=0;e<a;e++)for(let t=0;t<a;t++){const o=document.getElementById(`cell_${e}_${t}`);if(!o)continue;const l=o.cloneNode(!0);o.replaceWith(l),l.addEventListener("mouseenter",()=>{if(T&&!m)if(p===2){const n=s[e][t];(A==="draw"||A==="erase"&&(n===2||n===3))&&w(e,t,2)}else w(e,t,1)}),l.addEventListener("click",n=>{n.button===0&&!m&&(L=!0,w(e,t,1))}),l.addEventListener("contextmenu",n=>{n.preventDefault(),m||(L=!0,w(e,t,2))})}}function x(e){if(W(),e==="crosses"){for(let t=0;t<a;t++)for(let o=0;o<a;o++)if(s[t][o]===2){s[t][o]=0;const l=document.getElementById(`cell_${t}_${o}`);l&&(l.innerHTML="")}}else if(e==="flags"){for(let t=0;t<a;t++)for(let o=0;o<a;o++)if(s[t][o]===3){s[t][o]=0;const l=document.getElementById(`cell_${t}_${o}`);l&&(l.innerHTML="")}}else{m=!1,localStorage.setItem("gameCompleted","false"),s=[];for(let t=0;t<a;t++){s[t]=[];for(let o=0;o<a;o++){s[t][o]=0;const l=document.getElementById(`cell_${t}_${o}`);l&&(l.innerHTML="")}}}}function ge(e,t){return e>=0&&e<a&&t>=0&&t<a}document.getElementById("clear_board").addEventListener("click",()=>{m||(x("all"),localStorage.setItem("queens_matrix",JSON.stringify(s)),N(),C())});document.getElementById("clear_crosses").addEventListener("click",()=>{m||(x("crosses"),localStorage.setItem("queens_matrix",JSON.stringify(s)),N(),C())});document.getElementById("clear_flags").addEventListener("click",()=>{m||(x("flags"),localStorage.setItem("queens_matrix",JSON.stringify(s)),N(),C())});let J=[];function C(){if(m||!I)return!1;J=[];let e=!0;const t=[],o={},l=I&&I.flat?new Set(I.flat()):new Set;for(let n=0;n<a;n++)for(let r=0;r<a;r++){const c=document.getElementById(`cell_${n}_${r}`);if(c){const i=c.querySelector(".icon_queen");i&&i.classList.remove("invalid_queen")}if(s[n][r]===1){const i=I[n][r];t.push({row:n,col:r,color:i}),o[i]=(o[i]||0)+1}}for(let n=0;n<t.length;n++){let r=!1;for(let c=0;c<t.length;c++){if(n===c)continue;const i=t[n],d=t[c];(i.row===d.row||i.col===d.col||i.color===d.color||Math.abs(i.row-d.row)===1&&Math.abs(i.col-d.col)===1)&&(r=!0)}if(r){J.push([t[n].row,t[n].col]);const c=document.querySelector(`#cell_${t[n].row}_${t[n].col} .icon_queen`);c&&c.classList.add("invalid_queen"),e=!1}}for(const n of l)if(o[n]!==1){e=!1;break}return e&&t.length>0&&(m=!0,localStorage.setItem("gameCompleted","true"),localStorage.setItem("miliseconds",JSON.stringify(de())),W(),F(),D("win"),_e(),document.getElementById("timer").style.color="var(--timer_victory_color)",document.getElementById("timer").style.textShadow="0 0 10px #61e82c"),e}function _e(){for(let e=0;e<a;e++){const t=e*.3;for(let o=0;o<a;o++){const l=document.getElementById(`cell_${e}_${o}`);l&&(l.classList.add("victory_row"),l.style.animationDelay=`${t}s`)}}}let v=null;document.addEventListener("DOMContentLoaded",async()=>{const e=localStorage.getItem("colors_matrix");if(e){v=JSON.parse(e);const t=v.length;Z(t,v),K(v,!1)}else await Y()});document.getElementById("new_game").addEventListener("click",Y);async function Y(){const e=parseInt(document.getElementById("size").value),t=document.getElementById("difficulty").value;v=await ie(e,t),v?(Z(e,v),K(v,!0),localStorage.setItem("colors_matrix",JSON.stringify(v))):alert("Couldn't get a new board with the selected settings.")}function Z(e,t){const o=document.getElementById("board");o.innerHTML="";for(let l=0;l<e;l++){const n=document.createElement("tr");for(let r=0;r<e;r++){const c=document.createElement("td"),i=t[l][r];c.id=`cell_${l}_${r}`,c.className=`cell_color_${i}`,n.appendChild(c)}o.appendChild(n)}}let f={grid:null,visual_help:null,theme:null,difficulty:null,size:null};const u=document;function ve(){const e=localStorage.getItem("stored_selections");if(e)try{f=JSON.parse(e),u.getElementById("grid_selector").value=f.grid,u.getElementById("visual_settings").value=f.visual_help,u.getElementById("theme_selector").value=f.theme,u.getElementById("difficulty").value=f.difficulty,u.getElementById("size").value=f.size}catch(t){console.warn("Error parsing stored selections",t)}}function B(){f.grid=u.getElementById("grid_selector").value,f.visual_help=u.getElementById("visual_settings").value,f.theme=u.getElementById("theme_selector").value,f.difficulty=u.getElementById("difficulty").value,f.size=u.getElementById("size").value,localStorage.setItem("stored_selections",JSON.stringify(f))}window.addEventListener("DOMContentLoaded",ve);window.addEventListener("beforeunload",B);u.getElementById("grid_selector").addEventListener("change",B);u.getElementById("visual_settings").addEventListener("change",B);u.getElementById("theme_selector").addEventListener("change",B);u.getElementById("difficulty").addEventListener("change",B);u.getElementById("size").addEventListener("change",B);
