(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();async function b(){try{const t=(await(await fetch("src/assets/boards/board7x7.txt")).text()).trim().split(`
`).filter(l=>l.trim().length>0),n=Math.floor(Math.random()*t.length),o=t[n];return JSON.parse(o)}catch(e){return console.error("Error al obtener la matriz:",e),null}}let i=null,p=null,s=null,d=!1,u=null;document.addEventListener("mousedown",e=>{d=!0,u=e.button});document.addEventListener("mouseup",()=>{d=!1,u=null});document.getElementById("board").addEventListener("contextmenu",e=>{e.preventDefault()});async function y(e){p=e,s=p.length;const r=localStorage.getItem("matriz_reinas");if(r)try{const t=JSON.parse(r);if(Array.isArray(t)&&t.length===s)i=t;else throw new Error("Tamaño inválido")}catch{console.warn("Matriz reinas inválida o corrupta. Se reinicia."),m(),localStorage.setItem("matriz_reinas",JSON.stringify(i))}else m(),localStorage.setItem("matriz_reinas",JSON.stringify(i));w(),z()}function w(){for(let e=0;e<s;e++)for(let r=0;r<s;r++)g(e,r)}function g(e,r){const t=document.getElementById(`cell_${e}_${r}`);if(!t)return;const n=i[e][r];n===1?t.innerHTML='<img class="board_icons" src="src/assets/images/queen_icon.svg" alt="Queen Piece">':n===2?t.innerHTML='<img class="board_icons" src="src/assets/images/cross.svg" alt="Cross icon">':t.innerHTML=""}function h(e){const[r,t,n]=e.split("_").map(Number);v(t,n)&&(i[t][n]=i[t][n]===1?0:1,g(t,n),localStorage.setItem("matriz_reinas",JSON.stringify(i)))}function E(e){const[r,t,n]=e.split("_").map(Number);v(t,n)&&(i[t][n]=i[t][n]===2?0:2,g(t,n),localStorage.setItem("matriz_reinas",JSON.stringify(i)))}document.getElementById("clear_board").addEventListener("click",()=>{m(),localStorage.setItem("matriz_reinas",JSON.stringify(i))});function m(){i=[];for(let e=0;e<s;e++){i[e]=[];for(let r=0;r<s;r++){i[e][r]=0;const t=document.getElementById(`cell_${e}_${r}`);t&&(t.innerHTML="")}}}function z(){for(let e=0;e<s;e++)for(let r=0;r<s;r++){const t=document.getElementById(`cell_${e}_${r}`);t&&t.addEventListener("mouseenter",()=>{d&&u===0?h(t.id):d&&u===2&&E(t.id)})}}function v(e,r){return e>=0&&e<s&&r>=0&&r<s}let c=null;document.addEventListener("DOMContentLoaded",async()=>{const e=localStorage.getItem("matriz_colores");if(e)try{c=JSON.parse(e);const r=c.length;S(r,c),setTimeout(()=>y(c),0)}catch(r){console.error("Error al parsear localStorage:",r),await f()}else await f()});document.getElementById("new_game").addEventListener("click",f);async function f(){const e=parseInt(document.getElementById("size").value);c=await b(),c?(localStorage.setItem("matriz_colores",JSON.stringify(c)),localStorage.removeItem("matriz_reinas"),S(e,c),setTimeout(()=>y(c),0)):alert("Could not load the board")}function S(e,r){const t=document.getElementById("board");t.innerHTML="";for(let n=0;n<e;n++){const o=document.createElement("tr");for(let a=0;a<e;a++){const l=document.createElement("td");l.id=`cell_${n}_${a}`;const _=r[n][a];l.className="cell_color_"+_,l.classList.add(`cell_color_${_}`),o.appendChild(l),l.addEventListener("click",()=>h(l.id)),l.addEventListener("contextmenu",L=>{L.preventDefault(),E(l.id)})}t.appendChild(o)}}
